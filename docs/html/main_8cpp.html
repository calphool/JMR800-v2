<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JMR800 v2: src/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">JMR800 v2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('main_8cpp.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Entry point for the JMR800-V2 firmware.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;Adafruit_GFX.h&gt;</code><br />
<code>#include &lt;Adafruit_SH110X.h&gt;</code><br />
<code>#include &quot;<a class="el" href="defines_8h_source.html">defines.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_hardware_manager_8h_source.html">HardwareManager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_screen_manager_8h_source.html">ScreenManager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_run_mode_screen_8h_source.html">screens/RunModeScreen.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_logging_8h_source.html">Logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_mode_manager_8h_source.html">ModeManager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_run_mode_8h_source.html">modes/RunMode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_controls_test_mode_8h_source.html">modes/ControlsTestMode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_direct_command_mode_8h_source.html">modes/DirectCommandMode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_config_mode_8h_source.html">modes/ConfigMode.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="main_8cpp__incl.svg" width="2774" height="420"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d" id="r_a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes core subsystems and configures operational modes.  <br /></td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f" id="r_afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the main program loop for the JMR800 controller.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a81c4566223fc74b10e0bb02fde817dd4" id="r_a81c4566223fc74b10e0bb02fde817dd4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_run_mode.html">RunMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81c4566223fc74b10e0bb02fde817dd4">runMode</a></td></tr>
<tr class="memitem:a987978ac3ca8b91589fb0467859374c9" id="r_a987978ac3ca8b91589fb0467859374c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_controls_test_mode.html">ControlsTestMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a987978ac3ca8b91589fb0467859374c9">testMode</a></td></tr>
<tr class="memitem:a71b6a3d5bc80b2edcd349dc8cc4a0af1" id="r_a71b6a3d5bc80b2edcd349dc8cc4a0af1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_direct_command_mode.html">DirectCommandMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a71b6a3d5bc80b2edcd349dc8cc4a0af1">directMode</a></td></tr>
<tr class="memitem:a7ee76f293f3e08ce506e296a7883c47a" id="r_a7ee76f293f3e08ce506e296a7883c47a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_config_mode.html">ConfigMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ee76f293f3e08ce506e296a7883c47a">configMode</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Entry point for the JMR800-V2 firmware. </p>
<p>This file initializes the core subsystems of the JMR800 controller, including hardware abstraction, screen management, and mode handling. It defines the main setup and loop routines required by the Arduino runtime.</p><ul>
<li>The firmware supports multiple modes of operation, such as Run Mode, Controls Test Mode, Direct Command Mode, and Configuration Mode.</li>
</ul>
<p>This file is part of the JMR800-V2 project, which is an open-source project designed to provide a flexible and extensible platform for controlling various hardware components using a graphical interface.</p>
<dl class="section author"><dt>Author</dt><dd>Joe Rounceville </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-06-04 </dd></dl>

<p class="definition">Definition in file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes the main program loop for the JMR800 controller. </p>
<p>Called repeatedly by the Arduino runtime. This routine sequentially runs the periodic update logic for:</p><ul>
<li>Hardware monitoring and input polling</li>
<li>Mode-specific behavior execution</li>
<li><a class="el" href="class_screen.html" title="Base class for user interface screens.">Screen</a> updates and redraws </li>
</ul>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00078">78</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>            {</div>
<div class="line"><span class="lineno">   79</span>  <a class="code hl_variable" href="_hardware_manager_8h.html#a7480f085f55ce385142af9e9a75b3038">hardware</a>.loop();</div>
<div class="line"><span class="lineno">   80</span>  <a class="code hl_variable" href="_mode_manager_8h.html#a2ecf792bdf25f1204d6d7c2cca25ef17">modeManager</a>.loop();</div>
<div class="line"><span class="lineno">   81</span>  <a class="code hl_variable" href="_screen_manager_8h.html#ab37b18e0a31c78af2bd3e6afe1143692">screenManager</a>.loop();</div>
<div class="line"><span class="lineno">   82</span>}</div>
<div class="ttc" id="a_hardware_manager_8h_html_a7480f085f55ce385142af9e9a75b3038"><div class="ttname"><a href="_hardware_manager_8h.html#a7480f085f55ce385142af9e9a75b3038">hardware</a></div><div class="ttdeci">HardwareManager hardware</div><div class="ttdoc">Singleton instance of HardwareManager.</div><div class="ttdef"><b>Definition</b> <a href="_hardware_manager_8cpp_source.html#l00016">HardwareManager.cpp:16</a></div></div>
<div class="ttc" id="a_mode_manager_8h_html_a2ecf792bdf25f1204d6d7c2cca25ef17"><div class="ttname"><a href="_mode_manager_8h.html#a2ecf792bdf25f1204d6d7c2cca25ef17">modeManager</a></div><div class="ttdeci">ModeManager modeManager</div><div class="ttdoc">Global instance of the ModeManager.</div><div class="ttdef"><b>Definition</b> <a href="_mode_manager_8cpp_source.html#l00014">ModeManager.cpp:14</a></div></div>
<div class="ttc" id="a_screen_manager_8h_html_ab37b18e0a31c78af2bd3e6afe1143692"><div class="ttname"><a href="_screen_manager_8h.html#ab37b18e0a31c78af2bd3e6afe1143692">screenManager</a></div><div class="ttdeci">ScreenManager screenManager</div><div class="ttdoc">Global instance of the ScreenManager declared for use throughout the system.</div><div class="ttdef"><b>Definition</b> <a href="_screen_manager_8cpp_source.html#l00015">ScreenManager.cpp:15</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes core subsystems and configures operational modes. </p>
<p>Called once at startup. This routine initializes:</p><ul>
<li>The hardware abstraction layer (<span class="tt">hardware.init()</span>)</li>
<li>The screen display system (<span class="tt">screenManager.init()</span>)</li>
<li>The application mode manager, including:<ul>
<li>Run Mode</li>
<li>Controls Test Mode</li>
<li>Direct Command Mode</li>
<li>Configuration Mode</li>
</ul>
</li>
</ul>
<p>After registering all modes, the mode manager is initialized to activate the appropriate entry point for the application. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00056">56</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   56</span>             {</div>
<div class="line"><span class="lineno">   57</span>  <a class="code hl_function" href="_logging_8h.html#a32abad09d9f828a9805862e18ad5da5f">log</a>(<a class="code hl_enumvalue" href="_logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ac74e4f8b7fa7b544b66d09e854b8773a">LOG_VERBOSE</a>, <span class="stringliteral">&quot;Inside main-&gt;setup()&quot;</span>);</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>  <a class="code hl_variable" href="_hardware_manager_8h.html#a7480f085f55ce385142af9e9a75b3038">hardware</a>.init();</div>
<div class="line"><span class="lineno">   60</span>  <a class="code hl_variable" href="_screen_manager_8h.html#ab37b18e0a31c78af2bd3e6afe1143692">screenManager</a>.init();</div>
<div class="line"><span class="lineno">   61</span>  <a class="code hl_variable" href="_mode_manager_8h.html#a2ecf792bdf25f1204d6d7c2cca25ef17">modeManager</a>.addMode(&amp;<a class="code hl_variable" href="#a81c4566223fc74b10e0bb02fde817dd4">runMode</a>);</div>
<div class="line"><span class="lineno">   62</span>  <a class="code hl_variable" href="_mode_manager_8h.html#a2ecf792bdf25f1204d6d7c2cca25ef17">modeManager</a>.addMode(&amp;<a class="code hl_variable" href="#a987978ac3ca8b91589fb0467859374c9">testMode</a>);</div>
<div class="line"><span class="lineno">   63</span>  <a class="code hl_variable" href="_mode_manager_8h.html#a2ecf792bdf25f1204d6d7c2cca25ef17">modeManager</a>.addMode(&amp;<a class="code hl_variable" href="#a71b6a3d5bc80b2edcd349dc8cc4a0af1">directMode</a>);</div>
<div class="line"><span class="lineno">   64</span>  <a class="code hl_variable" href="_mode_manager_8h.html#a2ecf792bdf25f1204d6d7c2cca25ef17">modeManager</a>.addMode(&amp;<a class="code hl_variable" href="#a7ee76f293f3e08ce506e296a7883c47a">configMode</a>);</div>
<div class="line"><span class="lineno">   65</span>  <a class="code hl_variable" href="_mode_manager_8h.html#a2ecf792bdf25f1204d6d7c2cca25ef17">modeManager</a>.init();</div>
<div class="line"><span class="lineno">   66</span>}</div>
<div class="ttc" id="a_logging_8h_html_a32abad09d9f828a9805862e18ad5da5f"><div class="ttname"><a href="_logging_8h.html#a32abad09d9f828a9805862e18ad5da5f">log</a></div><div class="ttdeci">void log(LogLevel level, const String &amp;message)</div><div class="ttdoc">Logs a message with an explicit log level.</div><div class="ttdef"><b>Definition</b> <a href="_logging_8cpp_source.html#l00026">Logging.cpp:26</a></div></div>
<div class="ttc" id="a_logging_8h_html_aca1fd1d8935433e6ba2e3918214e07f9ac74e4f8b7fa7b544b66d09e854b8773a"><div class="ttname"><a href="_logging_8h.html#aca1fd1d8935433e6ba2e3918214e07f9ac74e4f8b7fa7b544b66d09e854b8773a">LOG_VERBOSE</a></div><div class="ttdeci">@ LOG_VERBOSE</div><div class="ttdef"><b>Definition</b> <a href="_logging_8h_source.html#l00020">Logging.h:20</a></div></div>
<div class="ttc" id="amain_8cpp_html_a71b6a3d5bc80b2edcd349dc8cc4a0af1"><div class="ttname"><a href="#a71b6a3d5bc80b2edcd349dc8cc4a0af1">directMode</a></div><div class="ttdeci">DirectCommandMode directMode</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00038">main.cpp:38</a></div></div>
<div class="ttc" id="amain_8cpp_html_a7ee76f293f3e08ce506e296a7883c47a"><div class="ttname"><a href="#a7ee76f293f3e08ce506e296a7883c47a">configMode</a></div><div class="ttdeci">ConfigMode configMode</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00039">main.cpp:39</a></div></div>
<div class="ttc" id="amain_8cpp_html_a81c4566223fc74b10e0bb02fde817dd4"><div class="ttname"><a href="#a81c4566223fc74b10e0bb02fde817dd4">runMode</a></div><div class="ttdeci">RunMode runMode</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00036">main.cpp:36</a></div></div>
<div class="ttc" id="amain_8cpp_html_a987978ac3ca8b91589fb0467859374c9"><div class="ttname"><a href="#a987978ac3ca8b91589fb0467859374c9">testMode</a></div><div class="ttdeci">ControlsTestMode testMode</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00037">main.cpp:37</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="main_8cpp_a4fc01d736fe50cf5b977f755b675f11d_cgraph.svg" width="151" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a7ee76f293f3e08ce506e296a7883c47a" name="a7ee76f293f3e08ce506e296a7883c47a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ee76f293f3e08ce506e296a7883c47a">&#9670;&#160;</a></span>configMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_config_mode.html">ConfigMode</a> configMode</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00039">39</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a71b6a3d5bc80b2edcd349dc8cc4a0af1" name="a71b6a3d5bc80b2edcd349dc8cc4a0af1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71b6a3d5bc80b2edcd349dc8cc4a0af1">&#9670;&#160;</a></span>directMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_direct_command_mode.html">DirectCommandMode</a> directMode</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00038">38</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a81c4566223fc74b10e0bb02fde817dd4" name="a81c4566223fc74b10e0bb02fde817dd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81c4566223fc74b10e0bb02fde817dd4">&#9670;&#160;</a></span>runMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_run_mode.html">RunMode</a> runMode</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00036">36</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a987978ac3ca8b91589fb0467859374c9" name="a987978ac3ca8b91589fb0467859374c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a987978ac3ca8b91589fb0467859374c9">&#9670;&#160;</a></span>testMode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_controls_test_mode.html">ControlsTestMode</a> testMode</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00037">37</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="main_8cpp.html">main.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
